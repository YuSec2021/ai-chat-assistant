------
name: 自动生成本次更新Todo清单  
descriptions: 每次新对话或明确新功能需求时，自动提取核心意图，创建结构化的todo清单文件，统一存放于 docs/updates/todo/ 目录（自动创建目录），文件名格式：YYYY-MM-DD_简短意图.md，用于建立可追溯的变更记录。

------

# 具体能力及执行流程

1. 判断是否需要生成  
   - 本次会话第一条明确需求消息 → 生成  
   - 继续上一轮、修bug、补充细节 → 跳过

2. 提取简短意图（≤10字）  
   示例：  
   - 新增商品模糊搜索  
   - 修复订单状态同步  
   - 重构登录态管理

3. 拼装文件名  
   格式：`YYYY-MM-DD_意图描述.md`  
   示例：2026-02-10_新增商品模糊搜索.md  
   （非法字符自动替换为下划线）

4. 确保目录存在  
   ```bash
   mkdir -p docs/updates/todo
   ```

5. 生成文件内容（精简版）

   ```markdown
   # 更新意图
   {一句话核心意图}

   # 创建时间
   {YYYY-MM-DD HH:MM}

   # 本次目标
   {结构化复述用户需求}

   # Todo

   - [ ] 核心功能实现
   - [ ] 边界case处理
   - [ ] 错误处理 & 提示
   - [ ] 单元测试 / 自测点
   - [ ] 需要用户确认事项

   # 备注
   ```

6. 写入文件  
   - 路径：docs/updates/todo/{filename}  
   - 若同名已存在 → 后缀 -v2、-v3 或追加内容

7. 向用户反馈  
   ```
   已创建本次todo清单：
   → docs/updates/todo/2026-02-10_新增商品模糊搜索.md
   将按此推进…
   ```

执行时机：**对话开始 / 新需求识别后立即执行**（最高优先前置技能）。  
若用户明确说“不用生成todo”则跳过。